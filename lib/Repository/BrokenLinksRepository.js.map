{"version":3,"sources":["../../src/Repository/BrokenLinksRepository.js"],"names":["BrokenLinksRepository","constructor","args","folder","createBrokenLinksFolder","save","url","file","name","json","JSON","stringify","links","output","filename","getSiteName"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA;;;AAGA,MAAMA,qBAAN,CAA4B;AACxB;;;;AAIAC,EAAAA,WAAW,CAACC,IAAD,EAAO;AACd;;;;AAIA,SAAKA,IAAL,GAAYA,IAAZ;AACA;;;;;AAIA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,uBAAL;AACH;AAED;;;;;;AAIAC,EAAAA,IAAI,CAACC,GAAD,EAAM;AACN,QAAIC,IAAI,GAAG,gBAAK,KAAKJ,MAAV,EAAkBG,GAAG,CAACE,IAAJ,GAAW,OAA7B,CAAX;AACA,QAAIC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeL,GAAG,CAACM,KAAnB,CAAX;AACA,2BAAcL,IAAd,EAAoBE,IAApB;AACH;AAED;;;;;AAGAL,EAAAA,uBAAuB,GAAG;AACtB,SAAKD,MAAL,GAAc,gBAAK,KAAKD,IAAL,CAAUW,MAAV,CAAiBC,QAAtB,EAAgC,KAAKZ,IAAL,CAAUa,WAAV,EAAhC,EAAyD,cAAzD,CAAd;;AACA,QAAI,CAAC,oBAAW,KAAKZ,MAAhB,CAAL,EAA8B;AAC1B,yBAAU,KAAKA,MAAf;AACH;AACJ;;AArCuB;;eAwCbH,qB","sourcesContent":["import { writeFileSync, existsSync, mkdirSync } from 'fs';\nimport Url from '../Model/Url';\nimport Args from '../Model/Args';\nimport { join } from \"path\";\n\n/**\n * Saves the broken links to file in json format.\n */\nclass BrokenLinksRepository {\n    /**\n     * Create a broken links repo.\n     * @param args {Args} from the commandline.\n     */\n    constructor(args) {\n        /**\n         * From the commandline.\n         * @type {Args}\n         */\n        this.args = args;\n        /**\n         * Folder to save the broken links to.\n         * @type {string} full path to the broken links folder in the project.\n         */\n        this.folder = '';\n        this.createBrokenLinksFolder();\n    }\n\n    /**\n     * Saves any broken link urls to a json file.\n     * @returns {Url} to save to the folder.\n     */\n    save(url) {\n        let file = join(this.folder, url.name + '.json');\n        let json = JSON.stringify(url.links);\n        writeFileSync(file, json);\n    }\n\n    /**\n     * Creates a broken links folder in the project folder.\n     */\n    createBrokenLinksFolder() {\n        this.folder = join(this.args.output.filename, this.args.getSiteName(), 'broken_links');\n        if (!existsSync(this.folder)) {\n            mkdirSync(this.folder)\n        }\n    }\n}\n\nexport default BrokenLinksRepository;"],"file":"BrokenLinksRepository.js"}